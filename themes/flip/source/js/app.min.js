!function t(e,n,o){function i(r,l){if(!n[r]){if(!e[r]){var c="function"==typeof require&&require;if(!l&&c)return c(r,!0);if(s)return s(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return i(n?n:t)},u,u.exports,t,e,n,o)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){!function(t,o){"use strict";"function"==typeof define&&define.amd?define([],o):"object"==typeof n?e.exports=o():t.Headroom=o()}(this,function(){"use strict";function t(t){this.callback=t,this.ticking=!1}function e(t){return t&&"undefined"!=typeof window&&(t===window||t.nodeType)}function n(t){if(arguments.length<=0)throw new Error("Missing arguments in extend function");var o,i,s=t||{};for(i=1;i<arguments.length;i++){var r=arguments[i]||{};for(o in r)"object"!=typeof s[o]||e(s[o])?s[o]=s[o]||r[o]:s[o]=n(s[o],r[o])}return s}function o(t){return t===Object(t)?t:{down:t,up:t}}function i(t,e){e=n(e,i.options),this.lastKnownScrollY=0,this.elem=t,this.tolerance=o(e.tolerance),this.classes=e.classes,this.offset=e.offset,this.scroller=e.scroller,this.initialised=!1,this.onPin=e.onPin,this.onUnpin=e.onUnpin,this.onTop=e.onTop,this.onNotTop=e.onNotTop,this.onBottom=e.onBottom,this.onNotBottom=e.onNotBottom}var s={bind:!!function(){}.bind,classList:"classList"in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};return window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,t.prototype={constructor:t,update:function(){this.callback&&this.callback(),this.ticking=!1},requestTick:function(){this.ticking||(requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this))),this.ticking=!0)},handleEvent:function(){this.requestTick()}},i.prototype={constructor:i,init:function(){if(i.cutsTheMustard)return this.debouncer=new t(this.update.bind(this)),this.elem.classList.add(this.classes.initial),setTimeout(this.attachEvent.bind(this),100),this},destroy:function(){var t=this.classes;this.initialised=!1,this.elem.classList.remove(t.unpinned,t.pinned,t.top,t.notTop,t.initial),this.scroller.removeEventListener("scroll",this.debouncer,!1)},attachEvent:function(){this.initialised||(this.lastKnownScrollY=this.getScrollY(),this.initialised=!0,this.scroller.addEventListener("scroll",this.debouncer,!1),this.debouncer.handleEvent())},unpin:function(){var t=this.elem.classList,e=this.classes;!t.contains(e.pinned)&&t.contains(e.unpinned)||(t.add(e.unpinned),t.remove(e.pinned),this.onUnpin&&this.onUnpin.call(this))},pin:function(){var t=this.elem.classList,e=this.classes;t.contains(e.unpinned)&&(t.remove(e.unpinned),t.add(e.pinned),this.onPin&&this.onPin.call(this))},top:function(){var t=this.elem.classList,e=this.classes;t.contains(e.top)||(t.add(e.top),t.remove(e.notTop),this.onTop&&this.onTop.call(this))},notTop:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notTop)||(t.add(e.notTop),t.remove(e.top),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.bottom)||(t.add(e.bottom),t.remove(e.notBottom),this.onBottom&&this.onBottom.call(this))},notBottom:function(){var t=this.elem.classList,e=this.classes;t.contains(e.notBottom)||(t.add(e.notBottom),t.remove(e.bottom),this.onNotBottom&&this.onNotBottom.call(this))},getScrollY:function(){return void 0!==this.scroller.pageYOffset?this.scroller.pageYOffset:void 0!==this.scroller.scrollTop?this.scroller.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},getElementPhysicalHeight:function(t){return Math.max(t.offsetHeight,t.clientHeight)},getScrollerPhysicalHeight:function(){return this.scroller===window||this.scroller===document.body?this.getViewportHeight():this.getElementPhysicalHeight(this.scroller)},getDocumentHeight:function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,e.scrollHeight,t.offsetHeight,e.offsetHeight,t.clientHeight,e.clientHeight)},getElementHeight:function(t){return Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)},getScrollerHeight:function(){return this.scroller===window||this.scroller===document.body?this.getDocumentHeight():this.getElementHeight(this.scroller)},isOutOfBounds:function(t){var e=t<0,n=t+this.getScrollerPhysicalHeight()>this.getScrollerHeight();return e||n},toleranceExceeded:function(t,e){return Math.abs(t-this.lastKnownScrollY)>=this.tolerance[e]},shouldUnpin:function(t,e){var n=t>this.lastKnownScrollY,o=t>=this.offset;return n&&o&&e},shouldPin:function(t,e){var n=t<this.lastKnownScrollY,o=t<=this.offset;return n&&e||o},update:function(){var t=this.getScrollY(),e=t>this.lastKnownScrollY?"down":"up",n=this.toleranceExceeded(t,e);this.isOutOfBounds(t)||(t<=this.offset?this.top():this.notTop(),t+this.getViewportHeight()>=this.getScrollerHeight()?this.bottom():this.notBottom(),this.shouldUnpin(t,n)?this.unpin():this.shouldPin(t,n)&&this.pin(),this.lastKnownScrollY=t)}},i.options={tolerance:{up:0,down:0},offset:0,scroller:window,classes:{pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},i.cutsTheMustard="undefined"!=typeof s&&s.rAF&&s.bind&&s.classList,i})},{}],2:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=t("./controller/AppController"),s=o(i);new s.default},{"./controller/AppController":3}],3:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=t("../modules/router"),r=o(s),l=t("./ArticleController"),c=o(l),a=function t(){i(this,t),new r.default("articles",c.default)};n.default=a},{"../modules/router":5,"./ArticleController":4}],4:[function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=t("headroom.js/dist/headroom.js"),r=o(s),l=function t(){i(this,t),console.log("article controller yayaya");var e={tolerance:{down:10,up:0}},n=document.querySelector(".fl-bar.fl-bar--top"),o=document.querySelector(".fl-bar.fl-bar--bottom"),s=new r.default(n,e),l=new r.default(o,e);s.init(),l.init(),console.log(s)};n.default=l},{"headroom.js/dist/headroom.js":1}],5:[function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(e,n){o(this,t),this.pathMatch(e)&&this.loadModule(n)}return i(t,[{key:"pathMatch",value:function(t){var e=!1,n=window.location.pathname.split("/");return n=n.length<2?"/":n[2],n===t&&(e=!0),e}},{key:"loadModule",value:function(t){new t}}]),t}();n.default=s},{}]},{},[2]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaGVhZHJvb20uanMvZGlzdC9oZWFkcm9vbS5qcyIsInRoZW1lcy9mbGlwL3NvdXJjZS9fanMvY2xpZW50L2FwcC5qcyIsInRoZW1lcy9mbGlwL3NvdXJjZS9fanMvY2xpZW50L2NvbnRyb2xsZXIvQXBwQ29udHJvbGxlci5qcyIsInRoZW1lcy9mbGlwL3NvdXJjZS9fanMvY2xpZW50L2NvbnRyb2xsZXIvQXJ0aWNsZUNvbnRyb2xsZXIuanMiLCJ0aGVtZXMvZmxpcC9zb3VyY2UvX2pzL2NsaWVudC9tb2R1bGVzL3JvdXRlci5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIkhlYWRyb29tIiwidGhpcyIsIkRlYm91bmNlciIsImNhbGxiYWNrIiwidGlja2luZyIsImlzRE9NRWxlbWVudCIsIm9iaiIsIndpbmRvdyIsIm5vZGVUeXBlIiwiZXh0ZW5kIiwib2JqZWN0IiwiYXJndW1lbnRzIiwia2V5IiwicmVzdWx0IiwicmVwbGFjZW1lbnQiLCJub3JtYWxpemVUb2xlcmFuY2UiLCJPYmplY3QiLCJkb3duIiwidXAiLCJlbGVtIiwib3B0aW9ucyIsImxhc3RLbm93blNjcm9sbFkiLCJ0b2xlcmFuY2UiLCJjbGFzc2VzIiwib2Zmc2V0Iiwic2Nyb2xsZXIiLCJpbml0aWFsaXNlZCIsIm9uUGluIiwib25VbnBpbiIsIm9uVG9wIiwib25Ob3RUb3AiLCJvbkJvdHRvbSIsIm9uTm90Qm90dG9tIiwiZmVhdHVyZXMiLCJiaW5kIiwiY2xhc3NMaXN0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJyQUYiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJwcm90b3R5cGUiLCJjb25zdHJ1Y3RvciIsInVwZGF0ZSIsInJlcXVlc3RUaWNrIiwicmFmQ2FsbGJhY2siLCJoYW5kbGVFdmVudCIsImluaXQiLCJjdXRzVGhlTXVzdGFyZCIsImRlYm91bmNlciIsImFkZCIsImluaXRpYWwiLCJzZXRUaW1lb3V0IiwiYXR0YWNoRXZlbnQiLCJkZXN0cm95IiwicmVtb3ZlIiwidW5waW5uZWQiLCJwaW5uZWQiLCJ0b3AiLCJub3RUb3AiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0U2Nyb2xsWSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bnBpbiIsImNvbnRhaW5zIiwicGluIiwiYm90dG9tIiwibm90Qm90dG9tIiwidW5kZWZpbmVkIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJib2R5IiwicGFyZW50Tm9kZSIsImdldFZpZXdwb3J0SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJnZXRFbGVtZW50UGh5c2ljYWxIZWlnaHQiLCJlbG0iLCJNYXRoIiwibWF4Iiwib2Zmc2V0SGVpZ2h0IiwiZ2V0U2Nyb2xsZXJQaHlzaWNhbEhlaWdodCIsImdldERvY3VtZW50SGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiZ2V0RWxlbWVudEhlaWdodCIsImdldFNjcm9sbGVySGVpZ2h0IiwiaXNPdXRPZkJvdW5kcyIsImN1cnJlbnRTY3JvbGxZIiwicGFzdFRvcCIsInBhc3RCb3R0b20iLCJ0b2xlcmFuY2VFeGNlZWRlZCIsImRpcmVjdGlvbiIsImFicyIsInNob3VsZFVucGluIiwic2Nyb2xsaW5nRG93biIsInBhc3RPZmZzZXQiLCJzaG91bGRQaW4iLCJzY3JvbGxpbmdVcCIsInNjcm9sbERpcmVjdGlvbiIsIl9BcHBDb250cm9sbGVyIiwiX0FwcENvbnRyb2xsZXIyIiwiZGVmYXVsdCIsIl9yb3V0ZXIiLCJfQXJ0aWNsZUNvbnRyb2xsZXIiLCJBcHBDb250cm9sbGVyIiwiX2NsYXNzQ2FsbENoZWNrIiwiX3JvdXRlcjIiLCJfQXJ0aWNsZUNvbnRyb2xsZXIyIiwiX2hlYWRyb29tIiwiY29uc29sZSIsImxvZyIsImhlYWRyb29tT3B0aW9ucyIsImhlYWRlciIsInF1ZXJ5U2VsZWN0b3IiLCJmb290ZXIiLCJzdGlja3lIZWFkZXIiLCJfaGVhZHJvb20yIiwic3RpY2t5Rm9vdGVyIiwiUm91dGVyTW9kdWxlIiwibWF0Y2giLCJwYXRoTWF0Y2giLCJsb2FkTW9kdWxlIiwibWF0Y2hlcyIsInBhdGgiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwic3BsaXQiXSwibWFwcGluZ3MiOiJDQUFBLFFBQUFBLEdBQUFDLEVBQUFDLEVBQUFDLEdBQUEsUUFBQUMsR0FBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLEdBQUFFLEdBQUEsa0JBQUFDLFVBQUFBLE9BQUEsS0FBQUYsR0FBQUMsRUFBQSxNQUFBQSxHQUFBRixHQUFBLEVBQUEsSUFBQUksRUFBQSxNQUFBQSxHQUFBSixHQUFBLEVBQUEsSUFBQUssR0FBQSxHQUFBQyxPQUFBLHVCQUFBTixFQUFBLElBQUEsTUFBQUssR0FBQUUsS0FBQSxtQkFBQUYsRUFBQSxHQUFBRyxHQUFBWCxFQUFBRyxJQUFBUyxXQUFBYixHQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxHQUFBRSxHQUFBRCxFQUFBSSxHQUFBLEdBQUFMLEVBQUEsT0FBQUksR0FBQUYsRUFBQUEsRUFBQUYsSUFBQWEsRUFBQUEsRUFBQUMsUUFBQWQsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxNQUFBRCxHQUFBRyxHQUFBUyxRQUFBLElBQUEsR0FBQUwsR0FBQSxrQkFBQUQsVUFBQUEsUUFBQUgsRUFBQSxFQUFBQSxFQUFBRixFQUFBYSxPQUFBWCxJQUFBRCxFQUFBRCxFQUFBRSxHQUFBLE9BQUFELEtBQUFhLEdBQUEsU0FBQVQsRUFBQVUsRUFBQUosSUNNQSxT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RUFDVkMsRUFBT3JILE9BQU9zSCxTQUFTQyxTQUFTQyxNQUFNLElBWTFDLE9BVENILEdBREdBLEVBQUtuSSxPQUFTLEVBQ1YsSUFFQW1JLEVBQUssR0FHVEEsSUFBU0osSUFDWkcsR0FBVSxHQUdKQSxxQ0FHR2hJLEdBQ1YsR0FBSUEsc0JBekJlNEgiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG4gKiBoZWFkcm9vbS5qcyB2MC45LjMgLSBHaXZlIHlvdXIgcGFnZSBzb21lIGhlYWRyb29tLiBIaWRlIHlvdXIgaGVhZGVyIHVudGlsIHlvdSBuZWVkIGl0XG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgTmljayBXaWxsaWFtcyAtIGh0dHA6Ly93aWNreS5uaWxsaWEubXMvaGVhZHJvb20uanNcbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gQ09NTU9OSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvLyBCUk9XU0VSXG4gICAgcm9vdC5IZWFkcm9vbSA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qIGV4cG9ydGVkIGZlYXR1cmVzICovXG4gIFxuICB2YXIgZmVhdHVyZXMgPSB7XG4gICAgYmluZCA6ICEhKGZ1bmN0aW9uKCl7fS5iaW5kKSxcbiAgICBjbGFzc0xpc3QgOiAnY2xhc3NMaXN0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gICAgckFGIDogISEod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG4gIH07XG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgXG4gIC8qKlxuICAgKiBIYW5kbGVzIGRlYm91bmNpbmcgb2YgZXZlbnRzIHZpYSByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICogQHNlZSBodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9zcGVlZC9hbmltYXRpb25zL1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gaGFuZGxlIHdoaWNoZXZlciBldmVudFxuICAgKi9cbiAgZnVuY3Rpb24gRGVib3VuY2VyIChjYWxsYmFjaykge1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnRpY2tpbmcgPSBmYWxzZTtcbiAgfVxuICBEZWJvdW5jZXIucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yIDogRGVib3VuY2VyLFxuICBcbiAgICAvKipcbiAgICAgKiBkaXNwYXRjaGVzIHRoZSBldmVudCB0byB0aGUgc3VwcGxpZWQgY2FsbGJhY2tcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHVwZGF0ZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jYWxsYmFjayAmJiB0aGlzLmNhbGxiYWNrKCk7XG4gICAgICB0aGlzLnRpY2tpbmcgPSBmYWxzZTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBlbnN1cmVzIGV2ZW50cyBkb24ndCBnZXQgc3RhY2tlZFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgcmVxdWVzdFRpY2sgOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmKCF0aGlzLnRpY2tpbmcpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmQ2FsbGJhY2sgfHwgKHRoaXMucmFmQ2FsbGJhY2sgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpKSk7XG4gICAgICAgIHRoaXMudGlja2luZyA9IHRydWU7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogQXR0YWNoIHRoaXMgYXMgdGhlIGV2ZW50IGxpc3RlbmVyc1xuICAgICAqL1xuICAgIGhhbmRsZUV2ZW50IDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnJlcXVlc3RUaWNrKCk7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogQ2hlY2sgaWYgb2JqZWN0IGlzIHBhcnQgb2YgdGhlIERPTVxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBlbGVtZW50IHRvIGNoZWNrXG4gICAqL1xuICBmdW5jdGlvbiBpc0RPTUVsZW1lbnQob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAob2JqID09PSB3aW5kb3cgfHwgb2JqLm5vZGVUeXBlKTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgZXh0ZW5kaW5nIG9iamVjdHNcbiAgICovXG4gIGZ1bmN0aW9uIGV4dGVuZCAob2JqZWN0IC8qLCBvYmplY3ROIC4uLiAqLykge1xuICAgIGlmKGFyZ3VtZW50cy5sZW5ndGggPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGFyZ3VtZW50cyBpbiBleHRlbmQgZnVuY3Rpb24nKTtcbiAgICB9XG4gIFxuICAgIHZhciByZXN1bHQgPSBvYmplY3QgfHwge30sXG4gICAgICAgIGtleSxcbiAgICAgICAgaTtcbiAgXG4gICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHJlcGxhY2VtZW50ID0gYXJndW1lbnRzW2ldIHx8IHt9O1xuICBcbiAgICAgIGZvciAoa2V5IGluIHJlcGxhY2VtZW50KSB7XG4gICAgICAgIC8vIFJlY3Vyc2UgaW50byBvYmplY3QgZXhjZXB0IGlmIHRoZSBvYmplY3QgaXMgYSBET00gZWxlbWVudFxuICAgICAgICBpZih0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmICEgaXNET01FbGVtZW50KHJlc3VsdFtrZXldKSkge1xuICAgICAgICAgIHJlc3VsdFtrZXldID0gZXh0ZW5kKHJlc3VsdFtrZXldLCByZXBsYWNlbWVudFtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHJlc3VsdFtrZXldIHx8IHJlcGxhY2VtZW50W2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIG5vcm1hbGl6aW5nIHRvbGVyYW5jZSBvcHRpb24gdG8gb2JqZWN0IGZvcm1hdFxuICAgKi9cbiAgZnVuY3Rpb24gbm9ybWFsaXplVG9sZXJhbmNlICh0KSB7XG4gICAgcmV0dXJuIHQgPT09IE9iamVjdCh0KSA/IHQgOiB7IGRvd24gOiB0LCB1cCA6IHQgfTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIFVJIGVuaGFuY2VtZW50IGZvciBmaXhlZCBoZWFkZXJzLlxuICAgKiBIaWRlcyBoZWFkZXIgd2hlbiBzY3JvbGxpbmcgZG93blxuICAgKiBTaG93cyBoZWFkZXIgd2hlbiBzY3JvbGxpbmcgdXBcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbSB0aGUgaGVhZGVyIGVsZW1lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgb3B0aW9ucyBmb3IgdGhlIHdpZGdldFxuICAgKi9cbiAgZnVuY3Rpb24gSGVhZHJvb20gKGVsZW0sIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIEhlYWRyb29tLm9wdGlvbnMpO1xuICBcbiAgICB0aGlzLmxhc3RLbm93blNjcm9sbFkgPSAwO1xuICAgIHRoaXMuZWxlbSAgICAgICAgICAgICA9IGVsZW07XG4gICAgdGhpcy50b2xlcmFuY2UgICAgICAgID0gbm9ybWFsaXplVG9sZXJhbmNlKG9wdGlvbnMudG9sZXJhbmNlKTtcbiAgICB0aGlzLmNsYXNzZXMgICAgICAgICAgPSBvcHRpb25zLmNsYXNzZXM7XG4gICAgdGhpcy5vZmZzZXQgICAgICAgICAgID0gb3B0aW9ucy5vZmZzZXQ7XG4gICAgdGhpcy5zY3JvbGxlciAgICAgICAgID0gb3B0aW9ucy5zY3JvbGxlcjtcbiAgICB0aGlzLmluaXRpYWxpc2VkICAgICAgPSBmYWxzZTtcbiAgICB0aGlzLm9uUGluICAgICAgICAgICAgPSBvcHRpb25zLm9uUGluO1xuICAgIHRoaXMub25VbnBpbiAgICAgICAgICA9IG9wdGlvbnMub25VbnBpbjtcbiAgICB0aGlzLm9uVG9wICAgICAgICAgICAgPSBvcHRpb25zLm9uVG9wO1xuICAgIHRoaXMub25Ob3RUb3AgICAgICAgICA9IG9wdGlvbnMub25Ob3RUb3A7XG4gICAgdGhpcy5vbkJvdHRvbSAgICAgICAgID0gb3B0aW9ucy5vbkJvdHRvbTtcbiAgICB0aGlzLm9uTm90Qm90dG9tICAgICAgPSBvcHRpb25zLm9uTm90Qm90dG9tO1xuICB9XG4gIEhlYWRyb29tLnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvciA6IEhlYWRyb29tLFxuICBcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXNlcyB0aGUgd2lkZ2V0XG4gICAgICovXG4gICAgaW5pdCA6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYoIUhlYWRyb29tLmN1dHNUaGVNdXN0YXJkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICB0aGlzLmRlYm91bmNlciA9IG5ldyBEZWJvdW5jZXIodGhpcy51cGRhdGUuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmVsZW0uY2xhc3NMaXN0LmFkZCh0aGlzLmNsYXNzZXMuaW5pdGlhbCk7XG4gIFxuICAgICAgLy8gZGVmZXIgZXZlbnQgcmVnaXN0cmF0aW9uIHRvIGhhbmRsZSBicm93c2VyIFxuICAgICAgLy8gcG90ZW50aWFsbHkgcmVzdG9yaW5nIHByZXZpb3VzIHNjcm9sbCBwb3NpdGlvblxuICAgICAgc2V0VGltZW91dCh0aGlzLmF0dGFjaEV2ZW50LmJpbmQodGhpcyksIDEwMCk7XG4gIFxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogVW5hdHRhY2hlcyBldmVudHMgYW5kIHJlbW92ZXMgYW55IGNsYXNzZXMgdGhhdCB3ZXJlIGFkZGVkXG4gICAgICovXG4gICAgZGVzdHJveSA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXM7XG4gIFxuICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5lbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3Nlcy51bnBpbm5lZCwgY2xhc3Nlcy5waW5uZWQsIGNsYXNzZXMudG9wLCBjbGFzc2VzLm5vdFRvcCwgY2xhc3Nlcy5pbml0aWFsKTtcbiAgICAgIHRoaXMuc2Nyb2xsZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5kZWJvdW5jZXIsIGZhbHNlKTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyB0aGUgc2Nyb2xsIGV2ZW50XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBhdHRhY2hFdmVudCA6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYoIXRoaXMuaW5pdGlhbGlzZWQpe1xuICAgICAgICB0aGlzLmxhc3RLbm93blNjcm9sbFkgPSB0aGlzLmdldFNjcm9sbFkoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsaXNlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2Nyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5kZWJvdW5jZXIsIGZhbHNlKTtcbiAgXG4gICAgICAgIHRoaXMuZGVib3VuY2VyLmhhbmRsZUV2ZW50KCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvKipcbiAgICAgKiBVbnBpbnMgdGhlIGhlYWRlciBpZiBpdCdzIGN1cnJlbnRseSBwaW5uZWRcbiAgICAgKi9cbiAgICB1bnBpbiA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbS5jbGFzc0xpc3QsXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXM7XG4gICAgICBcbiAgICAgIGlmKGNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLnBpbm5lZCkgfHwgIWNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLnVucGlubmVkKSkge1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzZXMudW5waW5uZWQpO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzZXMucGlubmVkKTtcbiAgICAgICAgdGhpcy5vblVucGluICYmIHRoaXMub25VbnBpbi5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIFBpbnMgdGhlIGhlYWRlciBpZiBpdCdzIGN1cnJlbnRseSB1bnBpbm5lZFxuICAgICAqL1xuICAgIHBpbiA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbS5jbGFzc0xpc3QsXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXM7XG4gICAgICBcbiAgICAgIGlmKGNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLnVucGlubmVkKSkge1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzZXMudW5waW5uZWQpO1xuICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzZXMucGlubmVkKTtcbiAgICAgICAgdGhpcy5vblBpbiAmJiB0aGlzLm9uUGluLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgdG9wIHN0YXRlc1xuICAgICAqL1xuICAgIHRvcCA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbS5jbGFzc0xpc3QsXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXM7XG4gICAgICBcbiAgICAgIGlmKCFjbGFzc0xpc3QuY29udGFpbnMoY2xhc3Nlcy50b3ApKSB7XG4gICAgICAgIGNsYXNzTGlzdC5hZGQoY2xhc3Nlcy50b3ApO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzZXMubm90VG9wKTtcbiAgICAgICAgdGhpcy5vblRvcCAmJiB0aGlzLm9uVG9wLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgbm90IHRvcCBzdGF0ZVxuICAgICAqL1xuICAgIG5vdFRvcCA6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IHRoaXMuZWxlbS5jbGFzc0xpc3QsXG4gICAgICAgIGNsYXNzZXMgPSB0aGlzLmNsYXNzZXM7XG4gICAgICBcbiAgICAgIGlmKCFjbGFzc0xpc3QuY29udGFpbnMoY2xhc3Nlcy5ub3RUb3ApKSB7XG4gICAgICAgIGNsYXNzTGlzdC5hZGQoY2xhc3Nlcy5ub3RUb3ApO1xuICAgICAgICBjbGFzc0xpc3QucmVtb3ZlKGNsYXNzZXMudG9wKTtcbiAgICAgICAgdGhpcy5vbk5vdFRvcCAmJiB0aGlzLm9uTm90VG9wLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgfSxcbiAgXG4gICAgYm90dG9tIDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2xhc3NMaXN0ID0gdGhpcy5lbGVtLmNsYXNzTGlzdCxcbiAgICAgICAgY2xhc3NlcyA9IHRoaXMuY2xhc3NlcztcbiAgICAgIFxuICAgICAgaWYoIWNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLmJvdHRvbSkpIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc2VzLmJvdHRvbSk7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3Nlcy5ub3RCb3R0b20pO1xuICAgICAgICB0aGlzLm9uQm90dG9tICYmIHRoaXMub25Cb3R0b20uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBub3QgdG9wIHN0YXRlXG4gICAgICovXG4gICAgbm90Qm90dG9tIDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2xhc3NMaXN0ID0gdGhpcy5lbGVtLmNsYXNzTGlzdCxcbiAgICAgICAgY2xhc3NlcyA9IHRoaXMuY2xhc3NlcztcbiAgICAgIFxuICAgICAgaWYoIWNsYXNzTGlzdC5jb250YWlucyhjbGFzc2VzLm5vdEJvdHRvbSkpIHtcbiAgICAgICAgY2xhc3NMaXN0LmFkZChjbGFzc2VzLm5vdEJvdHRvbSk7XG4gICAgICAgIGNsYXNzTGlzdC5yZW1vdmUoY2xhc3Nlcy5ib3R0b20pO1xuICAgICAgICB0aGlzLm9uTm90Qm90dG9tICYmIHRoaXMub25Ob3RCb3R0b20uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBZIHNjcm9sbCBwb3NpdGlvblxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy5zY3JvbGxZXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBwaXhlbHMgdGhlIHBhZ2UgaGFzIHNjcm9sbGVkIGFsb25nIHRoZSBZLWF4aXNcbiAgICAgKi9cbiAgICBnZXRTY3JvbGxZIDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKHRoaXMuc2Nyb2xsZXIucGFnZVlPZmZzZXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgPyB0aGlzLnNjcm9sbGVyLnBhZ2VZT2Zmc2V0XG4gICAgICAgIDogKHRoaXMuc2Nyb2xsZXIuc2Nyb2xsVG9wICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgPyB0aGlzLnNjcm9sbGVyLnNjcm9sbFRvcFxuICAgICAgICAgIDogKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keSkuc2Nyb2xsVG9wO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhlaWdodCBvZiB0aGUgdmlld3BvcnRcbiAgICAgKiBAc2VlIGh0dHA6Ly9hbmR5bGFuZ3Rvbi5jby51ay9ibG9nL2RldmVsb3BtZW50L2dldC12aWV3cG9ydC1zaXplLXdpZHRoLWFuZC1oZWlnaHQtamF2YXNjcmlwdFxuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIGhlaWdodCBvZiB0aGUgdmlld3BvcnQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgZ2V0Vmlld3BvcnRIZWlnaHQgOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmlubmVySGVpZ2h0XG4gICAgICAgIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgfHwgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGh5c2ljYWwgaGVpZ2h0IG9mIHRoZSBET00gZWxlbWVudFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gIGVsbSB0aGUgZWxlbWVudCB0byBjYWxjdWxhdGUgdGhlIHBoeXNpY2FsIGhlaWdodCBvZiB3aGljaFxuICAgICAqIEByZXR1cm4ge2ludH0gICAgIHRoZSBwaHlzaWNhbCBoZWlnaHQgb2YgdGhlIGVsZW1lbnQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgZ2V0RWxlbWVudFBoeXNpY2FsSGVpZ2h0IDogZnVuY3Rpb24gKGVsbSkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICBlbG0ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBlbG0uY2xpZW50SGVpZ2h0XG4gICAgICApO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBoeXNpY2FsIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIHBoeXNpY2FsIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRTY3JvbGxlclBoeXNpY2FsSGVpZ2h0IDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICh0aGlzLnNjcm9sbGVyID09PSB3aW5kb3cgfHwgdGhpcy5zY3JvbGxlciA9PT0gZG9jdW1lbnQuYm9keSlcbiAgICAgICAgPyB0aGlzLmdldFZpZXdwb3J0SGVpZ2h0KClcbiAgICAgICAgOiB0aGlzLmdldEVsZW1lbnRQaHlzaWNhbEhlaWdodCh0aGlzLnNjcm9sbGVyKTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50XG4gICAgICogQHNlZSBodHRwOi8vamFtZXMucGFkb2xzZXkuY29tL2phdmFzY3JpcHQvZ2V0LWRvY3VtZW50LWhlaWdodC1jcm9zcy1icm93c2VyL1xuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnQgaW4gcGl4ZWxzXG4gICAgICovXG4gICAgZ2V0RG9jdW1lbnRIZWlnaHQgOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHksXG4gICAgICAgIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICBcbiAgICAgIHJldHVybiBNYXRoLm1heChcbiAgICAgICAgYm9keS5zY3JvbGxIZWlnaHQsIGRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsXG4gICAgICAgIGJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBib2R5LmNsaWVudEhlaWdodCwgZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodFxuICAgICAgKTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIERPTSBlbGVtZW50XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSAgZWxtIHRoZSBlbGVtZW50IHRvIGNhbGN1bGF0ZSB0aGUgaGVpZ2h0IG9mIHdoaWNoXG4gICAgICogQHJldHVybiB7aW50fSAgICAgdGhlIGhlaWdodCBvZiB0aGUgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRFbGVtZW50SGVpZ2h0IDogZnVuY3Rpb24gKGVsbSkge1xuICAgICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICBlbG0uc2Nyb2xsSGVpZ2h0LFxuICAgICAgICBlbG0ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBlbG0uY2xpZW50SGVpZ2h0XG4gICAgICApO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudFxuICAgICAqIEByZXR1cm4ge2ludH0gdGhlIGhlaWdodCBvZiB0aGUgc2Nyb2xsZXIgZWxlbWVudCBpbiBwaXhlbHNcbiAgICAgKi9cbiAgICBnZXRTY3JvbGxlckhlaWdodCA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAodGhpcy5zY3JvbGxlciA9PT0gd2luZG93IHx8IHRoaXMuc2Nyb2xsZXIgPT09IGRvY3VtZW50LmJvZHkpXG4gICAgICAgID8gdGhpcy5nZXREb2N1bWVudEhlaWdodCgpXG4gICAgICAgIDogdGhpcy5nZXRFbGVtZW50SGVpZ2h0KHRoaXMuc2Nyb2xsZXIpO1xuICAgIH0sXG4gIFxuICAgIC8qKlxuICAgICAqIGRldGVybWluZXMgaWYgdGhlIHNjcm9sbCBwb3NpdGlvbiBpcyBvdXRzaWRlIG9mIGRvY3VtZW50IGJvdW5kYXJpZXNcbiAgICAgKiBAcGFyYW0gIHtpbnR9ICBjdXJyZW50U2Nyb2xsWSB0aGUgY3VycmVudCB5IHNjcm9sbCBwb3NpdGlvblxuICAgICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgb3V0IG9mIGJvdW5kcywgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgaXNPdXRPZkJvdW5kcyA6IGZ1bmN0aW9uIChjdXJyZW50U2Nyb2xsWSkge1xuICAgICAgdmFyIHBhc3RUb3AgID0gY3VycmVudFNjcm9sbFkgPCAwLFxuICAgICAgICBwYXN0Qm90dG9tID0gY3VycmVudFNjcm9sbFkgKyB0aGlzLmdldFNjcm9sbGVyUGh5c2ljYWxIZWlnaHQoKSA+IHRoaXMuZ2V0U2Nyb2xsZXJIZWlnaHQoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHBhc3RUb3AgfHwgcGFzdEJvdHRvbTtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBkZXRlcm1pbmVzIGlmIHRoZSB0b2xlcmFuY2UgaGFzIGJlZW4gZXhjZWVkZWRcbiAgICAgKiBAcGFyYW0gIHtpbnR9IGN1cnJlbnRTY3JvbGxZIHRoZSBjdXJyZW50IHNjcm9sbCB5IHBvc2l0aW9uXG4gICAgICogQHJldHVybiB7Ym9vbH0gdHJ1ZSBpZiB0b2xlcmFuY2UgZXhjZWVkZWQsIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHRvbGVyYW5jZUV4Y2VlZGVkIDogZnVuY3Rpb24gKGN1cnJlbnRTY3JvbGxZLCBkaXJlY3Rpb24pIHtcbiAgICAgIHJldHVybiBNYXRoLmFicyhjdXJyZW50U2Nyb2xsWS10aGlzLmxhc3RLbm93blNjcm9sbFkpID49IHRoaXMudG9sZXJhbmNlW2RpcmVjdGlvbl07XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogZGV0ZXJtaW5lIGlmIGl0IGlzIGFwcHJvcHJpYXRlIHRvIHVucGluXG4gICAgICogQHBhcmFtICB7aW50fSBjdXJyZW50U2Nyb2xsWSB0aGUgY3VycmVudCB5IHNjcm9sbCBwb3NpdGlvblxuICAgICAqIEBwYXJhbSAge2Jvb2x9IHRvbGVyYW5jZUV4Y2VlZGVkIGhhcyB0aGUgdG9sZXJhbmNlIGJlZW4gZXhjZWVkZWQ/XG4gICAgICogQHJldHVybiB7Ym9vbH0gdHJ1ZSBpZiBzaG91bGQgdW5waW4sIGZhbHNlIG90aGVyd2lzZVxuICAgICAqL1xuICAgIHNob3VsZFVucGluIDogZnVuY3Rpb24gKGN1cnJlbnRTY3JvbGxZLCB0b2xlcmFuY2VFeGNlZWRlZCkge1xuICAgICAgdmFyIHNjcm9sbGluZ0Rvd24gPSBjdXJyZW50U2Nyb2xsWSA+IHRoaXMubGFzdEtub3duU2Nyb2xsWSxcbiAgICAgICAgcGFzdE9mZnNldCA9IGN1cnJlbnRTY3JvbGxZID49IHRoaXMub2Zmc2V0O1xuICBcbiAgICAgIHJldHVybiBzY3JvbGxpbmdEb3duICYmIHBhc3RPZmZzZXQgJiYgdG9sZXJhbmNlRXhjZWVkZWQ7XG4gICAgfSxcbiAgXG4gICAgLyoqXG4gICAgICogZGV0ZXJtaW5lIGlmIGl0IGlzIGFwcHJvcHJpYXRlIHRvIHBpblxuICAgICAqIEBwYXJhbSAge2ludH0gY3VycmVudFNjcm9sbFkgdGhlIGN1cnJlbnQgeSBzY3JvbGwgcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtib29sfSB0b2xlcmFuY2VFeGNlZWRlZCBoYXMgdGhlIHRvbGVyYW5jZSBiZWVuIGV4Y2VlZGVkP1xuICAgICAqIEByZXR1cm4ge2Jvb2x9IHRydWUgaWYgc2hvdWxkIHBpbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgc2hvdWxkUGluIDogZnVuY3Rpb24gKGN1cnJlbnRTY3JvbGxZLCB0b2xlcmFuY2VFeGNlZWRlZCkge1xuICAgICAgdmFyIHNjcm9sbGluZ1VwICA9IGN1cnJlbnRTY3JvbGxZIDwgdGhpcy5sYXN0S25vd25TY3JvbGxZLFxuICAgICAgICBwYXN0T2Zmc2V0ID0gY3VycmVudFNjcm9sbFkgPD0gdGhpcy5vZmZzZXQ7XG4gIFxuICAgICAgcmV0dXJuIChzY3JvbGxpbmdVcCAmJiB0b2xlcmFuY2VFeGNlZWRlZCkgfHwgcGFzdE9mZnNldDtcbiAgICB9LFxuICBcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHVwZGF0aW5nIHRoZSBzdGF0ZSBvZiB0aGUgd2lkZ2V0XG4gICAgICovXG4gICAgdXBkYXRlIDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY3VycmVudFNjcm9sbFkgID0gdGhpcy5nZXRTY3JvbGxZKCksXG4gICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IGN1cnJlbnRTY3JvbGxZID4gdGhpcy5sYXN0S25vd25TY3JvbGxZID8gJ2Rvd24nIDogJ3VwJyxcbiAgICAgICAgdG9sZXJhbmNlRXhjZWVkZWQgPSB0aGlzLnRvbGVyYW5jZUV4Y2VlZGVkKGN1cnJlbnRTY3JvbGxZLCBzY3JvbGxEaXJlY3Rpb24pO1xuICBcbiAgICAgIGlmKHRoaXMuaXNPdXRPZkJvdW5kcyhjdXJyZW50U2Nyb2xsWSkpIHsgLy8gSWdub3JlIGJvdW5jeSBzY3JvbGxpbmcgaW4gT1NYXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAoY3VycmVudFNjcm9sbFkgPD0gdGhpcy5vZmZzZXQgKSB7XG4gICAgICAgIHRoaXMudG9wKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm5vdFRvcCgpO1xuICAgICAgfVxuICBcbiAgICAgIGlmKGN1cnJlbnRTY3JvbGxZICsgdGhpcy5nZXRWaWV3cG9ydEhlaWdodCgpID49IHRoaXMuZ2V0U2Nyb2xsZXJIZWlnaHQoKSkge1xuICAgICAgICB0aGlzLmJvdHRvbSgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMubm90Qm90dG9tKCk7XG4gICAgICB9XG4gIFxuICAgICAgaWYodGhpcy5zaG91bGRVbnBpbihjdXJyZW50U2Nyb2xsWSwgdG9sZXJhbmNlRXhjZWVkZWQpKSB7XG4gICAgICAgIHRoaXMudW5waW4oKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYodGhpcy5zaG91bGRQaW4oY3VycmVudFNjcm9sbFksIHRvbGVyYW5jZUV4Y2VlZGVkKSkge1xuICAgICAgICB0aGlzLnBpbigpO1xuICAgICAgfVxuICBcbiAgICAgIHRoaXMubGFzdEtub3duU2Nyb2xsWSA9IGN1cnJlbnRTY3JvbGxZO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIERlZmF1bHQgb3B0aW9uc1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgSGVhZHJvb20ub3B0aW9ucyA9IHtcbiAgICB0b2xlcmFuY2UgOiB7XG4gICAgICB1cCA6IDAsXG4gICAgICBkb3duIDogMFxuICAgIH0sXG4gICAgb2Zmc2V0IDogMCxcbiAgICBzY3JvbGxlcjogd2luZG93LFxuICAgIGNsYXNzZXMgOiB7XG4gICAgICBwaW5uZWQgOiAnaGVhZHJvb20tLXBpbm5lZCcsXG4gICAgICB1bnBpbm5lZCA6ICdoZWFkcm9vbS0tdW5waW5uZWQnLFxuICAgICAgdG9wIDogJ2hlYWRyb29tLS10b3AnLFxuICAgICAgbm90VG9wIDogJ2hlYWRyb29tLS1ub3QtdG9wJyxcbiAgICAgIGJvdHRvbSA6ICdoZWFkcm9vbS0tYm90dG9tJyxcbiAgICAgIG5vdEJvdHRvbSA6ICdoZWFkcm9vbS0tbm90LWJvdHRvbScsXG4gICAgICBpbml0aWFsIDogJ2hlYWRyb29tJ1xuICAgIH1cbiAgfTtcbiAgSGVhZHJvb20uY3V0c1RoZU11c3RhcmQgPSB0eXBlb2YgZmVhdHVyZXMgIT09ICd1bmRlZmluZWQnICYmIGZlYXR1cmVzLnJBRiAmJiBmZWF0dXJlcy5iaW5kICYmIGZlYXR1cmVzLmNsYXNzTGlzdDtcblxuICByZXR1cm4gSGVhZHJvb207XG59KSk7IiwiaW1wb3J0IEFwcENvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyL0FwcENvbnRyb2xsZXInO1xuXG5uZXcgQXBwQ29udHJvbGxlcigpO1xuIiwiaW1wb3J0IFJvdXRlck1vZHVsZSBmcm9tICcuLi9tb2R1bGVzL3JvdXRlcic7XG5pbXBvcnQgQXJ0aWNsZUNvbnRyb2xsZXIgZnJvbSAnLi9BcnRpY2xlQ29udHJvbGxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcENvbnRyb2xsZXIge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRuZXcgUm91dGVyTW9kdWxlKCdhcnRpY2xlcycsIEFydGljbGVDb250cm9sbGVyKTtcblx0fVxufSIsImltcG9ydCBIZWFkcm9vbSBmcm9tICdoZWFkcm9vbS5qcy9kaXN0L2hlYWRyb29tLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwQ29udHJvbGxlciB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdGNvbnNvbGUubG9nKCdhcnRpY2xlIGNvbnRyb2xsZXIgeWF5YXlhJyk7XG5cdFx0Y29uc3QgaGVhZHJvb21PcHRpb25zID0ge1xuXHRcdFx0dG9sZXJhbmNlIDoge1xuXHRcdFx0XHRkb3duIDogMTAsXG5cdFx0XHRcdHVwIDogMFxuXHRcdFx0fSxcblx0XHR9O1xuXHRcdGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mbC1iYXIuZmwtYmFyLS10b3AnKTtcblx0XHRjb25zdCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmwtYmFyLmZsLWJhci0tYm90dG9tJyk7XG5cdFx0bGV0IHN0aWNreUhlYWRlciA9IG5ldyBIZWFkcm9vbShoZWFkZXIsIGhlYWRyb29tT3B0aW9ucyk7XG5cdFx0bGV0IHN0aWNreUZvb3RlciA9IG5ldyBIZWFkcm9vbShmb290ZXIsIGhlYWRyb29tT3B0aW9ucyk7XG5cdFx0c3RpY2t5SGVhZGVyLmluaXQoKTtcblx0XHRzdGlja3lGb290ZXIuaW5pdCgpO1xuXG5cdFx0Y29uc29sZS5sb2coc3RpY2t5SGVhZGVyKTtcblx0fVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvdXRlck1vZHVsZSB7XG5cdGNvbnN0cnVjdG9yKG1hdGNoLCBtb2R1bGUpIHtcblx0XHRpZiAodGhpcy5wYXRoTWF0Y2gobWF0Y2gpKSB7XG5cdFx0XHR0aGlzLmxvYWRNb2R1bGUobW9kdWxlKTtcblx0XHR9XG5cdH1cblxuXHRwYXRoTWF0Y2gobWF0Y2gpIHtcblx0XHR2YXIgbWF0Y2hlcyA9IGZhbHNlO1xuXHRcdHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KCcvJyk7XG5cblx0XHRpZiAocGF0aC5sZW5ndGggPCAyKSB7XG5cdFx0XHRwYXRoID0gJy8nO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXRoID0gcGF0aFsyXVxuXHRcdH1cblxuXHRcdGlmIChwYXRoID09PSBtYXRjaCkge1xuXHRcdFx0bWF0Y2hlcyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH1cblxuXHRsb2FkTW9kdWxlKG1vZHVsZSkge1xuXHRcdG5ldyBtb2R1bGU7XG5cdH1cbn0iXX0=
